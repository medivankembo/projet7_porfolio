(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{"6FC9":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("ODXe"),r=n("q1tI"),a=n.n(r),l=n("9Koi"),o=n("vOnD"),c=n("e7mD"),s=n("x2/a"),u=n("s3o+"),d=n("qM2d"),p=n("OA2C"),f=a.a.createElement,m=o.d.div.withConfig({componentId:"sc-1j9wctc-0"})(["display:flex;justify-content:space-between;padding:48px 0;","{"," + ","{margin-left:18px;}}"],p.a,c.a,c.a),v=o.d.div.withConfig({componentId:"sc-1j9wctc-1"})(["display:flex;justify-content:center;align-items:center;border-top:1px solid ",";padding:48px 0 0 0;"],(function(e){return e.theme.palette.grey.lightest})),g=Object(o.d)(u.k).withConfig({componentId:"sc-1j9wctc-2"})(["margin-left:5px;border-radius:50%;padding:2px;background-color:",";.colorStroke{stroke:",";}"],(function(e){return e.theme.palette.purple.lighter2}),(function(e){return e.theme.palette.purple.base})),b=function(e){var t=e.isVisible,n=e.onSubmit,r=e.onCancel,a=Object(l.a)(),o=Object(i.a)(a,1)[0];return f(d.b,{isVisible:t,type:d.a.INFO,title:o("page.corrections.modal.title"),dataCy:"work-url-modal"},f(m,null,f(c.a,{onClick:r,variant:s.b.OUTLINED,color:s.a.RED},o("page.corrections.modal.cancel")),f(p.a,null,f(c.a,{onClick:function(){return n(!1)}},o("page.corrections.modal.sendWithoutLink")),f(c.a,{variant:s.b.CONTAINED,onClick:function(){return n(!0)}},o("page.corrections.modal.addLink")))),f(v,null,f(c.e,{variant:"h4"},o("page.corrections.modal.footerHelper")),f(g,null)))}},"9ODd":function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var i=n("wx14"),r=n("KQm4"),a=n("ODXe"),l=n("20a2"),o=n("q1tI"),c=n.n(o),s=n("NKCw"),u=n("9Koi"),d=n("o5PN"),p=n("e7mD"),f=n("4KJA"),m=n("s3o+"),v=n("sX9T"),g=n("vOnD"),b=n("7Cbv"),h=n("imlY"),k=n("6NQV"),O=c.a.createElement,w=Object(g.d)(p.e).withConfig({componentId:"sc-1l8j6ob-0"})(["padding-left:8px;padding-right:18px;width:100%;"]),x=Object(g.d)(k.D).withConfig({componentId:"sc-1l8j6ob-1"})(["circle{fill:",";}path{stroke:",";}"],(function(e){return e.theme.palette.red.base}),(function(e){return e.theme.palette.white.base})),j=Object(g.d)(k.db).withConfig({componentId:"sc-1l8j6ob-2"})(["circle{fill:",";opacity:1;}path{stroke:",";}"],(function(e){return e.theme.palette.green.base}),(function(e){return e.theme.palette.white.base})),C=g.d.div.withConfig({componentId:"sc-1l8j6ob-3"})(["display:flex;"]),L=Object(g.d)((function(e){var t=e.title,n=e.onClick,i=e.isValid,r=e.className,l=Object(u.a)(),o=Object(a.a)(l,1)[0];return O("div",{className:r},O(C,null,O(i?j:x,null)),O(w,{variant:"h5"},t),O(f.a,{onClick:n,title:o("component.listItem.close"),"aria-label":o("component.listItem.close")},O(h.h,null)))})).withConfig({componentId:"sc-1l8j6ob-4"})(["display:flex;align-items:center;justify-content:space-between;border-radius:8px;outline:none;border:1px solid ",";padding:10px 16px;button{svg{circle{fill:transparent;}path{stroke:",";}}}"],(function(e){return e.theme.palette.purple.lighter2}),(function(e){return e.theme.palette.black.base})),I=n("EenM"),y=n("NaVI"),E=n("o0o1"),N=n.n(E),R=n("HaE+"),S=n("RClP"),T=n("v4aJ"),V=n("TIkT"),D=n("OA2C"),U=c.a.createElement,A=g.d.button.withConfig({componentId:"sc-1hgoveg-0"})(["display:flex;background-color:",";border-radius:50%;--icon-color:",";cursor:pointer;padding:0;border:0;outline:0;svg{width:17px;height:17px;}&:hover{background-color:",";--icon-color:",";}&:focus{border:1px solid ",";}"],(function(e){return e.theme.palette.purple.lighter2}),(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.white.base}),(function(e){return e.theme.palette.purple.base})),F=Object(g.d)(S.a).withConfig({componentId:"sc-1hgoveg-1"})(["margin-top:4px;"]),q=Object(g.d)(p.e).attrs({as:"label",for:"workUrl"}).withConfig({componentId:"sc-1hgoveg-2"})(["font-weight:600;font-size:10px;line-height:14px;display:block;"]),W=function(e){var t=e.onClick,n=e.className,i=e.onAddLink,r=e.autoFocus,l=Object(u.a)(),o=Object(a.a)(l,1)[0],c=Object(s.f)(),d=c.register,p=c.trigger,f=c.watch,m=c.errors,g=c.setValue,b=c.setError,k=function(){var e=Object(R.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("workUrl");case 2:e.sent&&f("workUrl")?(i(f("workUrl")||""),g("workUrl","")):f("workUrl")||b("workUrl",{type:"required"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return U("div",{className:n,onClick:t},U(q,null,o("page.corrections.messaging.addWorkLinkLabel"),U(S.b,null,o("page.corrections.messaging.helperText"))),U(D.a,{alignItems:"center"},U(T.a,{id:"workUrl",name:"workUrl",placeholder:o("page.corrections.messaging.placeholderLink"),leftIcon:U(h.n,null),rightIcon:U(A,{type:"button",onClick:k},U(h.x,null),U(v.a,null,o("page.corrections.messaging.addWorkLabel"))),error:!!m.workUrl,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),k())},ref:d,autoFocus:r})),m.workUrl&&U(F,{status:V.b.ERROR},o("page.corrections.messaging.errors.urlFormat")))},M=c.a.createElement,K=g.d.div.withConfig({componentId:"sc-1axt63s-0"})(["display:flex;align-items:flex-end;"]),P=g.d.div.withConfig({componentId:"sc-1axt63s-1"})(["display:flex;flex-direction:column;& > div{margin-bottom:10px;}"]),z=Object(g.d)(d.a).withConfig({componentId:"sc-1axt63s-2"})([""," width:100%;outline:none;font-size:14px;resize:none;border:none;position:relative;z-index:100;background:transparent;&:valid + label,&:focus + label{display:none;}&:disabled{cursor:not-allowed;}",""],(function(e){return e.theme.typography.p}),(function(e){return e.canAddWork&&Object(g.c)(["border-bottom:1px solid ",";&:focus{border-bottom:1px solid ",";}"],(function(e){return e.theme.palette.grey.base}),(function(e){return e.theme.palette.purple.base}))})),_=g.d.div.withConfig({componentId:"sc-1axt63s-3"})(["position:relative;"]),H=g.d.div.withConfig({componentId:"sc-1axt63s-4"})(["position:relative;flex:1;display:flex;flex-direction:column;border:",";border-radius:8px;padding:7px 18px;margin-right:10px;min-width:0;"," ",""],(function(e){var t=e.theme;return e.isError?"2px solid ".concat(t.palette.red.base):"1px solid ".concat(t.palette.grey.base)}),(function(e){var t=e.isDisabled,n=e.theme;return t?{backgroundColor:n.palette.grey.lightest,border:"2px solid ".concat(n.palette.red.base)}:{backgroundColor:"transparent"}}),(function(e){var t=e.isActivated,n=e.theme,i=e.isError;return!t&&Object(g.c)(["border:2px solid ",";padding:8px 17px;"],i?n.palette.red.base:n.palette.purple.base)})),J=g.d.div.withConfig({componentId:"sc-1axt63s-5"})(["margin-top:12px;"," + ","{margin-top:18px;}"],y.a,y.a),Q=g.d.div.withConfig({componentId:"sc-1axt63s-6"})(["margin:",';font-family:"Nunito Sans",sans-serif;font-style:normal;font-weight:600;font-size:10px;line-height:14px;color:',";display:flex;align-items:center;transition:height ease 0.2s;height:",";overflow:hidden;> svg{width:13px;height:13px;margin-right:8px;}"],(function(e){return e.isOpen?"0 0 0 8px":"0"}),(function(e){return e.theme.palette.red.base}),(function(e){return e.isOpen?"18px":0})),X=g.d.div.withConfig({componentId:"sc-1axt63s-7"})(["display:flex;align-items:center;margin-bottom:2px;"]),B=Object(g.d)(X).withConfig({componentId:"sc-1axt63s-8"})(["margin-top:8px;"]),Y=Object(g.d)(p.e).attrs({as:"label",htmlFor:"inputMessage"}).withConfig({componentId:"sc-1axt63s-9"})(["font-weight:600;font-size:10px;line-height:14px;display:block;"]),G=Object(g.d)(f.a).withConfig({componentId:"sc-1axt63s-10"})(["height:44px;width:44px;background-color:",";border-radius:50%;--icon-color:",";&:hover{background-color:",";--icon-color:",";}&:active{background-color:",";--icon-color:",";}&:focus{background-color:",";--icon-color:",";border:3px solid ",";}"],(function(e){return e.theme.palette.grey.lightest}),(function(e){return e.theme.palette.grey.base}),(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.white.base}),(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.white.base}),(function(e){return e.theme.palette.purple.lighter2}),(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.purple.light}));var Z=Object(g.d)((function(e){var t,n=e.canAddWork,d=e.isLearnerActive,p=void 0===d||d,f=e.className,g=e.disabled,k=void 0!==g&&g,O=Object(u.a)(),w=Object(a.a)(O,1)[0],x="true"===Object(l.useRouter)().query.focus,j=Object(o.useState)(x),C=j[0],E=j[1],N=Object(s.f)(),R=N.watch,S=N.setValue,T=N.errors,V=N.control,D=N.trigger,U=R("learnerLinks");Object(o.useEffect)((function(){D("learnerLinks")}),[U]);var A=function(e){return S("learnerLinks",e)},F=R("isReview")?R("skillLevelValidations"):[];return Object(o.useEffect)((function(){return document.addEventListener("invalid",(function(e){e.preventDefault()}),!0),function(){document.removeEventListener("invalid",(function(e){return e.preventDefault()}))}})),M("div",{className:f},M("div",null,M(X,null,M(Y,null,w(n?"page.corrections.messaging.addWorkLabel":"page.corrections.messaging.label")),M(Q,{isOpen:!!T.message},M(m.e,null),w("form.errors."+(null===(t=T.message)||void 0===t?void 0:t.type))),M(Q,{isOpen:!!T.learnerLinks||!p},M(m.e,null),T.learnerLinks&&w("page.corrections.messaging.errors.learnerLinks",{count:I.a}),!p&&w("page.corrections.messaging.errors.learnerNotActive"))),M(K,null,M(H,{isDisabled:!p,isActivated:!C,isError:!!T.message||!!T.learnerLinks||!p},n&&M(W,{onClick:function(){return E(!0)},onAddLink:function(e){return A&&U&&A([].concat(Object(r.a)(U),[{url:e}]))},autoFocus:x}),F&&M(P,null,F.map((function(e){return M(L,{key:e.id,title:e.title,isValid:e.valid,onClick:function(){return t=e.id,S("skillLevelValidations",null===F||void 0===F?void 0:F.filter((function(e){return e.id!==t})));var t}})}))),U&&U.length>0&&M(J,null,U.map((function(e,t){var n=e.url;return M(y.a,{key:Object(b.a)(),url:n,onClose:function(){A(U.filter((function(e,n){return n!==t})))}})}))),M(_,null,M(s.a,{name:"message",control:V,render:function(e){return M(c.a.Fragment,null,n&&M(B,null,M(Y,null,w("page.corrections.messaging.label"))),M(z,Object(i.a)({id:"inputMessage","aria-disabled":!p,disabled:!p,onClick:function(){return E(!0)},maxRows:19,placeholder:w("page.corrections.messaging.labelTextarea"),canAddWork:n},e)))}}))),M(G,{type:"submit",disabled:k},M(v.a,null,w("page.corrections.messaging.submit")),M(h.u,null)))))})).withConfig({componentId:"sc-1axt63s-11"})(["padding:8px 36px 18px;"])},EenM:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n("o0o1"),r=n.n(i),a=n("HaE+"),l=n("KQm4"),o=n("ODXe"),c=n("NWhz"),s=n("q1tI"),u=n.n(s),d=n("NKCw"),p=n("9Koi"),f=n("Qv+K"),m=n("vOnD"),v=n("7Cbv"),g=n("UGp+"),b=n("Tj+Q"),h=n("gnxY"),k=n("N44y"),O=n("nW0M"),w=n("fXMU"),x=n("YFqc"),j=n.n(x),C=n("e7mD"),L=n("CPRH"),I=n("9ODd"),y=n("m57U"),E=u.a.createElement,N=function(e){var t=e.work,n=e.learner,i=e.skillLevels,r=e.isTrainer,a=Object(s.useMemo)((function(){if(!t)return[];var e=t.validatedSkillLevels.map((function(e){var t=null===i||void 0===i?void 0:i.find((function(t){return t["@id"]===e}));return t?{id:t["@id"],title:t.skill.officialTitle,level:t.level,validated:!0}:null})).filter((function(e){return null!==e})),n=t.unvalidatedSkillLevels.map((function(e){var t=null===i||void 0===i?void 0:i.find((function(t){return t["@id"]===e}));return t?{id:t["@id"],title:t.skill.officialTitle,level:t.level,validated:!1}:null})).filter((function(e){return null!==e}));return[].concat(Object(l.a)(e),Object(l.a)(n))}),[t]);return E(u.a.Fragment,null,t.learnerComment&&E(y.a,{right:!r,user:n,message:t.learnerComment,learnerLinks:t.learnerLinks,date:t.learnerDatetime}),t.trainerComment&&E(y.a,{right:r,user:t.trainer,message:t.trainerComment,skillLevelValidations:a,date:t.trainerDatetime}))},R=u.a.createElement,S=Object(m.d)(C.e).withConfig({componentId:"sc-1lfv1l2-0"})(["color:",";outline-color:",";"],(function(e){return e.theme.palette.purple.base}),(function(e){return e.theme.palette.purple.base})),T=m.d.div.withConfig({componentId:"sc-1lfv1l2-1"})(["padding:",";"],(function(e){var t=e.theme;return"".concat(t.spacing[6]," ").concat(t.spacing[7]," ").concat(t.spacing[5]," ").concat(t.spacing[7])})),V=m.d.div.withConfig({componentId:"sc-1lfv1l2-2"})(["overflow-y:scroll;padding:0 ",";padding-right:",";margin-right:",";width:100%;"],(function(e){return e.theme.spacing[7]}),(function(e){var t=e.theme;return"calc(".concat(t.spacing[7]," - ").concat(t.spacing[2],")")}),(function(e){return e.theme.spacing[2]})),D=m.d.div.withConfig({componentId:"sc-1lfv1l2-3"})(["display:flex;flex:1;width:100%;min-height:0;"]),U=Object(m.d)((function(e){var t=e.title,n=e.works,i=e.learner,r=e.skillLevels,a=e.briefId,l=e.isTrainer,o=e.isLearnerActive,c=e.className,u=e.preventSubmit,d=void 0!==u&&u,p=Object(s.useRef)(null),f=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.scrollTo(0,p.current.scrollHeight)}),[p,n]),Object(s.useEffect)((function(){f&&f.current&&f.current.focus()}),[f]),R("div",{className:c},R(T,null,R(j.a,{href:L.a.BRIEFS_DETAILS,as:a,passHref:!0},R(S,{ref:f,as:"a",variant:"h3"},t))),R(D,null,R(V,{ref:p},null===n||void 0===n?void 0:n.map((function(e){return R(N,{isTrainer:l,key:e["@id"],work:e,learner:i,skillLevels:r})})))),R(b.b,{features:[b.a.TOPICS_WORK_EVAL,b.a.TOPICS_WORK_SUBMIT]},R(I.a,{isLearnerActive:l?o:void 0,disabled:d,canAddWork:!l})))})).withConfig({componentId:"sc-1lfv1l2-4"})(["width:100%;display:flex;flex-direction:column;justify-content:space-between;height:100%;"]),A=n("x2/a"),F=u.a.createElement,q=Object(m.d)(C.e).withConfig({componentId:"n91wrn-0"})(["color:",";"],(function(e){return e.theme.palette.purple.base})),W=m.d.div.withConfig({componentId:"n91wrn-1"})(["padding:",";margin:"," 0;background-color:",";border-radius:",";"],(function(e){return e.theme.spacing[4]}),(function(e){return e.theme.spacing[6]}),(function(e){return e.theme.palette.grey.lightest}),(function(e){return e.theme.shape.borderRadius})),M=Object(m.d)((function(e){var t=e.children,n=e.briefTitle,i=e.component,r=e.className,a=Object(p.a)(),l=Object(o.a)(a,1)[0];return F("div",{className:r},F(C.e,{as:"h4",variant:"h4"},l("component.".concat(i,".title")),F(q,{as:"span",variant:"h4"},n)),F(W,null,F(C.e,null,l("component.".concat(i,".subtitle")))),t)})).withConfig({componentId:"n91wrn-2"})(["display:flex;flex-direction:column;height:100%;padding:",";"],(function(e){var t=e.theme;return"".concat(t.spacing[6]," ").concat(t.spacing[5])})),K=n("AJoC"),P=u.a.createElement,z=m.d.ul.withConfig({componentId:"sc-1lrfqd9-0"})(["flex:1;padding:0;& > li{list-style:none;}"]),_=Object(m.d)(C.a).withConfig({componentId:"sc-1lrfqd9-1"})(["width:auto;margin-right:auto;"]),H=function(e){var t=e.briefTitle,n=e.skillLevels,i=e.readOnly,r=void 0!==i&&i,a=Object(p.a)(),c=Object(o.a)(a,1)[0],u=Object(d.f)(),f=u.setValue,m=(0,u.watch)("skillLevelValidations"),v=Object(s.useState)(m||[]),g=v[0],b=v[1];Object(s.useEffect)((function(){b(m||[])}),[m]);var h=Object(s.useCallback)((function(e,t,n){return b((function(i){return[].concat(Object(l.a)(i.filter((function(t){return t.id!==e}))),[{title:"".concat(n.skill.officialTitle," - ").concat(c("page.corrections.messaging.level",{skillLevelNumber:n.level})),id:e,valid:t}])}))}),[]);return P(M,{briefTitle:t,component:"skillLevelsReview"},P(z,null,n.map((function(e){var t=g.find((function(t){return t.id===e["@id"]})),n="".concat(e.skill.officialTitle," - ").concat(c("page.corrections.messaging.level",{skillLevelNumber:e.level}));return P("li",{key:e["@id"]},P(K.a,{id:e["@id"],title:n,value:t&&t.valid,onValidChange:r?void 0:function(t,n){return h(t,n,e)},readOnly:r}))}))),!r&&P(_,{type:"button",color:A.a.GREEN,onClick:function(){f("isReview",!0),f("skillLevelValidations",g)},disabled:0===g.length},c("page.corrections.validateReview")))},J=u.a.createElement,Q=m.d.ul.withConfig({componentId:"sc-1xql2t5-0"})(["flex:1;padding:0;& > li{list-style:none;}"]),X=function(e){var t=e.briefTitle,n=e.skillLevels,i=Object(p.a)(),r=Object(o.a)(i,1)[0],a=(0,Object(d.f)().watch)("skillLevelValidations");return J(M,{briefTitle:t,component:"skillLevelsInfos"},J(Q,null,n.map((function(e){var t=null===a||void 0===a?void 0:a.find((function(t){return t.id===e["@id"]}));return J("li",{key:e["@id"]},J(K.a,{id:e["@id"],title:"".concat(e.skill.officialTitle," - ").concat(r("page.corrections.messaging.level",{skillLevelNumber:e.level})),value:t&&t.valid,readOnly:!0}))}))))},B=n("6FC9"),Y=u.a.createElement,G=m.d.form.withConfig({componentId:"xt1nsh-0"})(["display:flex;height:100%;"]),Z=m.d.div.withConfig({componentId:"xt1nsh-1"})(["flex:2;min-width:0;"]),$=5,ee=g.d().shape({skillLevelValidations:g.a(),isReview:g.b(),message:g.f().required(),learnerLinks:g.a().max($),workUrl:g.f().url()}).required();t.b=Object(m.d)((function(e){var t=e.selectedTopic,n=e.isTrainer,i=e.onSubmitSuccess,u=e.className,m=Object(s.useState)(!1),g=m[0],x=m[1],j=Object(b.d)()(b.a.TOPICS_WORK_EVAL),C=Object(d.e)({resolver:Object(c.a)(ee),defaultValues:{skillLevelValidations:[],isReview:!1,learnerLinks:[]}}),L=C.watch("learnerLinks"),I=function(e){return C.setValue("learnerLinks",e)},y=C.watch("message"),E=function(e){return C.setValue("message",e)},N=Object(p.a)(),R=Object(o.a)(N,1)[0];Object(s.useEffect)((function(){C.register({name:"skillLevelValidations"}),C.register({name:"isReview"}),C.register({name:"learnerLinks"})}),[C.register]),Object(s.useEffect)((function(){C.reset({isReview:!1,skillLevelValidations:[],learnerLinks:[]})}),[t]);var S=Object(f.e)(t["@id"]),T=S.data,V=S.isLoading,D=S.refetch,A=T,F=(null===A||void 0===A?void 0:A.works)||[],q=null===A||void 0===A?void 0:A.lastRenderedWork;Object(s.useEffect)((function(){T&&E("")}),[T]);var W=Object(s.useMemo)((function(){return{url:null===A||void 0===A?void 0:A.brief}}),[A]),M=Object(k.a)(W,{manual:!0}),K=M.isPending,P=M.response,z=M.fetch;Object(s.useEffect)((function(){A&&z()}),[A]),Object(s.useEffect)((function(){var e=Object(l.a)(F).reverse().find((function(e){return e.status===h.e.CORRECTED}));if(e&&P){var t,n=P.data.skillLevels,i=e.validatedSkillLevels.map((function(e){var t=n.find((function(t){return t["@id"]===e}));return t?{id:t["@id"],title:"".concat(t.skill.officialTitle," - ").concat(R("page.corrections.messaging.level",{skillLevelNumber:t.level})),valid:!0}:null})).filter((function(e){return null!==e})),r=e.unvalidatedSkillLevels.map((function(e){var t=n.find((function(t){return t["@id"]===e}));return t?{id:t["@id"],title:"".concat(t.skill.officialTitle," - ").concat(R("page.corrections.messaging.level",{skillLevelNumber:t.level})),valid:!1}:null})).filter((function(e){return null!==e}));t=[].concat(Object(l.a)(i),Object(l.a)(r)),C.setValue("skillLevelValidations",t)}}),[P,F,A]);var _=Object(s.useMemo)((function(){return{method:"PUT",url:(null===A||void 0===A?void 0:A.lastRenderedWork)&&(null===A||void 0===A?void 0:A.lastRenderedWork["@id"])}}),[A]),J=Object(O.a)(_).request,Q=Object(s.useMemo)((function(){return{method:"POST",url:"/works"}}),[]),$=Object(O.a)(Q),te=$.request,ne=$.isPending,ie=Object(s.useCallback)(C.handleSubmit(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isReview){e.next=6;break}return e.next=3,J({data:{validatedSkillLevels:null===(n=t.skillLevelValidations)||void 0===n?void 0:n.filter((function(e){return!0===e.valid})).map((function(e){return e.id})),unvalidatedSkillLevels:null===(a=t.skillLevelValidations)||void 0===a?void 0:a.filter((function(e){return!1===e.valid})).map((function(e){return e.id})),trainerComment:t.message}});case 3:C.setValue("isReview",!1),e.next=8;break;case 6:return e.next=8,te({data:{uuid:Object(v.a)(),topic:A&&A["@id"],trainerComment:t.message}});case 8:D(),i&&i(),E("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[A,F]),re=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.topic,a=t.message,l=t.learnerLinks,e.next=3,te({data:{uuid:Object(v.a)(),topic:null===n||void 0===n?void 0:n["@id"],learnerComment:a,learnerLinks:l.length>0?l:void 0}});case 3:i&&i(),D(),E(""),I([]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=Object(s.useCallback)(C.handleSubmit((function(e){e.workUrl?x(!0):re({topic:A,message:e.message,learnerLinks:e.learnerLinks||[]})})),[A,F]),le=Object(s.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L?[].concat(Object(l.a)(L),[{url:C.watch("workUrl")||""}]):[{url:C.watch("workUrl")||""}],e.next=3,re({topic:A,message:y,learnerLinks:t?n:L||[]});case 3:C.setValue("workUrl",""),x(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[L,F,A,y]),oe=(null===q||void 0===q?void 0:q.status)===h.e.NONCORRECTED;return V||K||!P||!A?null:Y(d.b,C,Y(G,{onSubmit:n?ie:ae,className:u},Y(w.a,{aside:n?Y(H,{readOnly:!oe||!j,briefTitle:P.data.title,skillLevels:P.data.skillLevels}):Y(X,{briefTitle:null===P||void 0===P?void 0:P.data.title,skillLevels:null===P||void 0===P?void 0:P.data.skillLevels})},Y(Z,null,Y(U,{works:F,title:P.data.title,briefId:P.data["@id"],learner:A.learner,skillLevels:P.data.skillLevels,isTrainer:n,isLearnerActive:t.learnerInClassroom,preventSubmit:ne}),Y(B.a,{isVisible:g,onSubmit:le,onCancel:function(){return x(!1)}})))))})).withConfig({componentId:"xt1nsh-2"})(["","{height:calc(100vh - 120px);}"],U)},OA2C:function(e,t,n){"use strict";var i=n("vOnD").d.div.withConfig({componentId:"sc-1mhylr7-0"})(["display:flex;",""],(function(e){var t=e.alignItems;return t&&{alignItems:t}}));t.a=i},qM2d:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i,r,a,l=n("rePB"),o=n("q1tI"),c=n.n(o),s=n("i8i4"),u=n.n(s),d=n("vOnD"),p=n("rM55"),f=n("e7mD"),m=n("s3o+"),v=n("Mmop"),g=n("OA2C"),b=c.a.createElement,h=Object(d.c)(["height:44px;width:44px;margin-right:18px;"]),k=Object(d.d)(m.i).withConfig({componentId:"sc-1p7zrxo-0"})([""," .colorFill{fill:",";}.colorStroke{stroke:",";}"],h,(function(e){return e.theme.palette.purple.lightest}),(function(e){return e.theme.palette.purple.base})),O=Object(d.d)(m.e).withConfig({componentId:"sc-1p7zrxo-1"})(["",""],h),w=Object(d.d)(m.b).withConfig({componentId:"sc-1p7zrxo-2"})([""," .colorFill{fill:",";}.colorStroke{stroke:",";}"],h,(function(e){return e.theme.palette.green.lightest}),(function(e){return e.theme.palette.green.base}));!function(e){e.INFO="info",e.ERROR="error",e.SUCCESS="success"}(a||(a={}));var x=(i={},Object(l.a)(i,a.INFO,"purple"),Object(l.a)(i,a.SUCCESS,"green"),Object(l.a)(i,a.ERROR,"red"),i),j=(r={},Object(l.a)(r,a.INFO,b(k,null)),Object(l.a)(r,a.SUCCESS,b(w,null)),Object(l.a)(r,a.ERROR,b(O,null)),r);t.b=Object(d.d)((function(e){var t=e.className,n=e.children,i=e.isVisible,r=void 0!==i&&i,l=e.title,c=e.type,s=void 0===c?a.INFO:c,d=(e.dataCy,Object(o.useContext)(p.b)),m=d.modalNode,h=d.setVisible;return Object(o.useEffect)((function(){h(r)}),[r]),m?u.a.createPortal(b(v.a,{visible:r,className:t},b(g.a,null,j[s],b(f.e,{variant:"h3",as:"h1"},l)),n),m):null})).withConfig({componentId:"sc-1p7zrxo-3"})(["& > div{box-shadow:4px 4px 0px ",";}"],(function(e){var t=e.theme,n=e.type;return t.palette[x[n||a.INFO]].base}))}}]);
//# sourceMappingURL=6cae762d244ce6e1a1d28ba6131538316bad64f1.9e6f18d1c6ef086e6ddb.js.map