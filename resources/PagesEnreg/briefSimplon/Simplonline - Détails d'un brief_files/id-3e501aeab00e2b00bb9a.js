_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[70],{GOVi:function(e,t,r){"use strict";r.r(t);var i=r("ODXe"),n=r("q1tI"),a=r.n(n),c=r("9Koi"),s=r("CjCg"),o=r("/BV7"),l=r("LTRp"),u=r("rePB"),d=r("20a2"),b=r("Qyje"),p=r("vOnD"),f=r("6pSU"),O=r("Tj+Q"),m=r("CPRH"),j=r("WsNZ"),S=r("gnxY"),g=r("N44y"),v=r("ZDBi"),T=r("yujh"),h=r("EenM"),y=r("6DYm"),D=r("lkxA"),w=r("uix1"),E=r("pwMb"),k=a.a.createElement,C=Object(p.d)((function(e){var t=e.className,r=e.isPending,a=e.topics,s=e.selectedTopic,o=e.onSelectTopic,l=e.onUpdateSortParam,u=e.isFiltered,d=e.setIsFiltered,b=e.isTrainer,p=e.onChangeSelectedBrief,f=e.selectedBrief,m=e.onChangeSelectedLearner,S=e.selectedLearner,g=Object(c.a)(),v=Object(i.a)(g,1)[0],T=Object(O.d)()(O.a.TOPICS_WORK_SUBMIT),h=Object(n.useMemo)((function(){return[{id:1,propertyName:"brief.title",label:v("page.corrections.briefs"),sortAscTitle:v("accessibility.buttons.sortBriefAsc"),sortDescTitle:v("accessibility.buttons.sortBriefDesc")},{id:2,propertyName:"lastRenderedWork.learnerDatetime",label:v("page.corrections.lastWork"),sortAscTitle:v("accessibility.buttons.sortLastRenderedWorkDatetimeAsc"),sortDescTitle:v("accessibility.buttons.sortLastRenderedWorkDatetimeDesc")}]}),[]),y=Object(n.useMemo)((function(){return[{id:1,propertyName:"brief.title",label:v("page.corrections.briefs"),sortAscTitle:v("accessibility.buttons.sortBriefAsc"),sortDescTitle:v("accessibility.buttons.sortBriefDesc")},{id:2,propertyName:"date",label:v("page.corrections.lastWork"),sortAscTitle:v("accessibility.buttons.sortLastWorkAsc"),sortDescTitle:v("accessibility.buttons.sortLastWorkDesc")}]}),[]);return k("div",{className:t},k(w.a,{onUpdateFiltered:d,isFiltered:u,isTrainer:b,onChangeSelectedBrief:p,selectedBrief:f,onChangeSelectedLearner:m,selectedLearner:S}),k(D.a,{headerOptions:b?h:y,onUpdateSortParam:l,isPending:r},null===a||void 0===a?void 0:a.map((function(e){var t,r=E.a.BLANK;e.lastRenderedWork&&(r=e.lastRenderedWork.status===j.WorkStatus.CORRECTED?E.a.ASSESSED:E.a.TO_BE_ASSESSED);var i=void 0;if(!T){var n=e.learner,a=n.name,c=n.surname,l=n.email;i=a&&c&&"".concat(a.toUpperCase(),", ").concat(c)||l}return k(E.b,{key:e["@id"],title:e.brief.title,subtitle:i,date:null===(t=e.lastRenderedWork)||void 0===t?void 0:t.learnerDatetime,status:r,selected:(null===s||void 0===s?void 0:s["@id"])===e["@id"],onClick:function(){return o(e)},disabled:!e.learnerInClassroom})}))))})).withConfig({componentId:"sc-1ig13qk-0"})(["display:flex;flex-direction:column;padding:18px 12px 0 12px;background-color:",";","{margin:0 auto;}"],(function(e){return e.theme.palette.white.base}),y.a),P=a.a.createElement;function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=Object(p.d)(C).withConfig({componentId:"sc-1wtzwkr-0"})(["width:100%;height:100%;"]),B=function(){var e=Object(f.c)().activeClassroom,t=Object(n.useState)(),r=t[0],s=t[1],o=Object(n.useState)(),u=o[0],p=o[1],y=Object(n.useState)(!1),D=y[0],w=y[1],E=Object(d.useRouter)(),k=E.query,C=E.push,_=Object(c.a)(),B=Object(i.a)(_,1)[0],W=Object(n.useState)(),I=W[0],R=W[1],L=Object(n.useState)(),F=L[0],x=L[1],U=Object(O.d)()(O.a.TOPICS_WORK_SUBMIT),M=!U,V=function(e){return C(m.a.TOPICS_DETAILS,m.a.TOPICS_DETAILS.replace("[id]",Object(T.b)(e)||""),{shallow:!0})};if(!e)return null;var q=Object(n.useMemo)((function(){var t=Object(T.b)(e["@id"]),r=I?Object(T.b)(I["@id"]):void 0,i=F?Object(T.b)(F["@id"]):void 0,n={};return D&&(U?n.status=j.TopicStatus.UNVALIDATED:n["lastRenderedWork.status[]"]=S.e.NONCORRECTED),U||(n["exists[works]"]="true"),Object(b.stringify)(A(A({},n),{},{"classroom.uuid":t||void 0,"brief.uuid":r||void 0,"learner.uuid":i||void 0,pagination:"false"},u))}),[u,e,D,I,F]),K=Object(n.useMemo)((function(){return{url:"/topics?".concat(q)}}),[q]),z=Object(g.a)(K,{manual:!0}),X=z.response,G=z.isPending,J=z.fetch;Object(n.useEffect)((function(){q&&J()}),[q,D]);var Q=(null===X||void 0===X?void 0:X.data["hydra:member"])||[];Object(n.useEffect)((function(){Q&&Q.length>0&&!k.id&&V(Q[0]["@id"])}),[Q]),Object(n.useEffect)((function(){if(k&&Q){var e=Q.find((function(e){return Object(T.b)(e["@id"])===k.id}));e&&s(e)}}),[k,Q]);var Y=Object(n.useCallback)((function(e){s(e),V(e["@id"])}),[s]);return P(a.a.Fragment,null,r&&P(l.a,{title:B("page.corrections.meta.titleWithSelectedTitle",{briefTitle:r.brief.title,learnerName:r.learner.name,learnerSurname:r.learner.surname})}),P(v.a,{menu:P(N,{isTrainer:M,topics:Q,selectedTopic:r,onSelectTopic:Y,isPending:G,onUpdateSortParam:p,setIsFiltered:w,isFiltered:D,onChangeSelectedBrief:R,selectedBrief:I,onChangeSelectedLearner:x,selectedLearner:F})},r&&P(h.b,{isTrainer:M,selectedTopic:r,onSubmitSuccess:J})))},W=r("5lS+"),I=a.a.createElement;t.default=function(){var e=Object(c.a)(),t=Object(i.a)(e,1)[0];return I(a.a.Fragment,null,I(l.a,{title:t("page.corrections.meta.title")}),I(o.a,{isFullWidth:!0,hideFooter:!0},I(W.b,{workspace:W.a.Individual},I(B,null)),I(s.a,null)))}},pAVt:function(e,t,r){"use strict";r.r(t);var i=r("GOVi");t.default=i.default},qzlh:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspaces/individual/[id]",function(){return r("pAVt")}])}},[["qzlh",2,1,27,0,3,4,5,6,7,8,9,10,11,12,13,14,16,15,18,28,29]]]);
//# sourceMappingURL=[id]-3e501aeab00e2b00bb9a.js.map